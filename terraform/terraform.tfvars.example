region           = "<aws-region>"
ecs_cluster_name = "<ecs-cluster-name>"
vpc_id           = "<vpc-id>"
subnet_ids       = ["<subnet-a>", "<subnet-b>"]
security_group_ids = ["<security-group-id>"]
assign_public_ip = false

services = {
  osc-fabric-bridge = {
    task_def_template_path = "${path.module}/../task-defs/fabric-bridge.json.tmpl"
    task_def_vars = {
      cpu                        = "256"
      memory                     = "512"
      execution_role_arn         = "<execution-role-arn>"
      task_role_arn              = "<task-role-arn>"
      image                      = "<ecr-image-uri>"
      fabric_channel             = "<channel>"
      fabric_chaincode           = "<chaincode>"
      fabric_peer                = "<peer-host:port>"
      peer_endpoint              = "<peer-host:port>"
      msp_id                     = "<msp-id>"
      identity_label             = "<identity-label>"
      submitter_email_default    = "<submitter-email>"
      submitter_username_default = "<submitter-username>"
      tls_override_hostname      = "<tls-override-hostname>"
      s3_bucket                  = "<s3-bucket>"
      s3_org1_identity_key       = "<s3-key>"
      s3_org1_cert_key           = "<s3-key>"
      submit_fn                  = "<submit-fn>"
      update_fn                  = "<update-fn>"
      history_fn                 = "<history-fn>"
      submit_args_mode           = "<submit-args-mode>"
      log_group                  = "<log-group>"
      aws_region                 = "<aws-region>"
    }
    desired_count = 1
  }
  osc-submission-worker = {
    task_def_template_path = "${path.module}/../task-defs/submission-worker.json.tmpl"
    task_def_vars = {
      cpu                        = "512"
      memory                     = "1024"
      execution_role_arn         = "<execution-role-arn>"
      task_role_arn              = "<task-role-arn>"
      image                      = "<ecr-image-uri>"
      rabbitmq_queue_updated     = "<queue-name>"
      rabbitmq_port              = "5672"
      rabbitmq_queue_submit      = "<queue-name>"
      environment                = "<env>"
      fabric_bridge_url          = "<fabric-bridge-url>"
      rabbitmq_host              = "<rabbitmq-host>"
      rabbitmq_queue_update      = "<queue-name>"
      rabbitmq_queue_submitted   = "<queue-name>"
      rabbitmq_user_secret_arn   = "<secret-arn>"
      rabbitmq_pass_secret_arn   = "<secret-arn>"
      log_group                  = "<log-group>"
      aws_region                 = "<aws-region>"
    }
    desired_count = 3
  }
}
